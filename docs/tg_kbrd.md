# UI‚Äë–∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã Telegram‚Äë–±–æ—Ç–∞ (Reply / Inline)

> **–ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** –¥–ª—è –≤—Å–µ–π –ª–æ–≥–∏–∫–∏ –º–µ–Ω—é –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
> –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ **–æ–±—è–∑–∞–Ω—ã** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —ç—Ç–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É.
> 
> **–í–µ—Ä—Å–∏—è:** 2.1 (Type B —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ B1/B2)

---

## 1. –¶–µ–ª–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

* ReplyKeyboard **–Ω–µ —Å—Ö–ª–æ–ø—ã–≤–∞–µ—Ç—Å—è** –Ω–∞ Android
* –°–∏—Å—Ç–µ–º–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (IME) **–Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è** –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
* –ß–∞—Ç –æ—Å—Ç–∞—ë—Ç—Å—è **—á–∏—Å—Ç—ã–º** (—Ç–æ–ª—å–∫–æ 1 —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞)
* –ü–æ–≤–µ–¥–µ–Ω–∏–µ **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ** –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ–µ

---

## 2. –¢–µ—Ä–º–∏–Ω—ã

| –¢–µ—Ä–º–∏–Ω                   | –û–ø–∏—Å–∞–Ω–∏–µ                                                      |
| ------------------------ | ------------------------------------------------------------- |
| **ReplyKeyboard**        | –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ Telegram (–≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞)                            |
| **InlineKeyboard**       | –ö–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º (callback)                              |
| **–Ø–∫–æ—Ä—å –º–µ–Ω—é**           | –°–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç–∞ —Å ReplyKeyboard                                |
| **last_menu_message_id** | `message_id` —è–∫–æ—Ä—è –≤ Redis                                    |
| **IME**                  | –°–∏—Å—Ç–µ–º–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ Android                                  |

---

## 3. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 3.1 –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ReplyKeyboard

```python
ReplyKeyboardMarkup(
    keyboard=[...],
    resize_keyboard=True,
    is_persistent=True,  # –ö–†–ò–¢–ò–ß–ù–û –¥–ª—è Android!
)
```

**`is_persistent=True`** ‚Äî –¥–µ—Ä–∂–∏—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤–∏–¥–∏–º–æ–π, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç IME.

### 3.2 –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

**ZWS (`\u200b`) –ù–ï –†–ê–ë–û–¢–ê–ï–¢** ‚Äî Telegram API –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∫–∞–∫ –ø—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–µ–Ω—é: `"üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"`, `"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"`
- –ú–∏–Ω–∏–º—É–º: emoji `"üìã"`

### 3.3 –•—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

Redis:
```
key:   tg:menu:{chat_id}
value: message_id (string)
ttl:   –Ω–µ—Ç
```

---

## 4. Type A ‚Äî Reply ‚Üí Reply (–æ—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –º–µ–Ω—é

### –ê–ª–≥–æ—Ä–∏—Ç–º (–ø–æ—Ä—è–¥–æ–∫ –∫—Ä–∏—Ç–∏—á–µ–Ω!)

```
1. old_menu_id = Redis.get(chat_id)
2. user_msg_id = message.message_id

3. msg = send_message(title, ReplyKeyboard)     # –°–ù–ê–ß–ê–õ–ê –æ—Ç–ø—Ä–∞–≤–∏—Ç—å!
4. Redis.set(chat_id, msg.id)                   # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤—ã–π —è–∫–æ—Ä—å

5. if old_menu_id: delete(old_menu_id)          # –ü–û–¢–û–ú —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π
6. delete(user_msg_id)                          # –ò —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ü–æ—á–µ–º—É —Ç–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫?

- –®–∞–≥ 3: –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ **–ø–æ—è–≤–ª—è–µ—Ç—Å—è** —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –®–∞–≥–∏ 5-6: —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –∫–æ–≥–¥–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ **—É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞**
- IME –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è, —Ç.–∫. ReplyKeyboard —É–∂–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ

### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ —á–∞—Ç–µ

```
[ Bot: "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" + –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ ]
```

–û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ. –ß–∏—Å—Ç–æ.

### –ú–µ—Ç–æ–¥

```python
await mc.show(message, kb, title="üìã")
```

---

## 5. Type B1 ‚Äî Reply ‚Üí Inline (readonly ‚Äî —Å–ø–∏—Å–∫–∏, –≤—ã–±–æ—Ä)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–æ–∫–∞–∑ —Å–ø–∏—Å–∫–æ–≤, –≤—ã–±–æ—Ä –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –°–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π/—É—Å–ª—É–≥/—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –í—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä–µ–∫—Ç–∞
- –õ—é–±–æ–π —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –ù–ï –æ–∂–∏–¥–∞–µ—Ç—Å—è

### –ê–ª–≥–æ—Ä–∏—Ç–º

```
1. user_msg_id = message.message_id

2. send_message(text, InlineKeyboard)           # Inline —Å–æ–æ–±—â–µ–Ω–∏–µ
3. track_inline(msg.id)                         # –î–ª—è –æ—á–∏—Å—Ç–∫–∏

4. delete(user_msg_id)                          # –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

# Reply-—è–∫–æ—Ä—å –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è ‚Äî IME –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è!
```

### –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ

- Reply-—è–∫–æ—Ä—å **–°–û–•–†–ê–ù–Ø–ï–¢–°–Ø** –≤ Redis
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ—Å—Ç–∞—ë—Ç—Å—è "–Ω–∞ –ø–∞—É–∑–µ" ‚Äî IME –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É Reply (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ —á–∞—Ç–µ

```
[ Bot: "üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" + –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (—Å–∫—Ä—ã—Ç–∞ –Ω–æ –∞–∫—Ç–∏–≤–Ω–∞) ]
[ Bot: "üìç –õ–æ–∫–∞—Ü–∏–∏ (5)" + inline-–∫–Ω–æ–ø–∫–∏ ]
```

### –ú–µ—Ç–æ–¥

```python
await mc.show_inline_readonly(message, text, kb)
```

---

## 6. Type B2 ‚Äî Reply ‚Üí Inline (input ‚Äî —Ñ–æ—Ä–º—ã, –≤–≤–æ–¥)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –í–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è, –≥–æ—Ä–æ–¥–∞, –∞–¥—Ä–µ—Å–∞
- –õ—é–±–æ–π FSM wizard step —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –≤–≤–æ–¥–æ–º
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –î–û–õ–ñ–ï–ù –≤–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç

### –ê–ª–≥–æ—Ä–∏—Ç–º

```
1. old_menu_id = Redis.get(chat_id)
2. user_msg_id = message.message_id

3. send_message(text, InlineKeyboard)           # Inline —Å–æ–æ–±—â–µ–Ω–∏–µ
4. track_inline(msg.id)                         # –î–ª—è –æ—á–∏—Å—Ç–∫–∏

5. delete(user_msg_id)                          # –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. if old_menu_id: delete(old_menu_id)          # –£–î–ê–õ–ò–¢–¨ Reply-—è–∫–æ—Ä—å!
7. Redis.delete(chat_id)                        # –û—á–∏—Å—Ç–∏—Ç—å —è–∫–æ—Ä—å –≤ Redis
```

### –ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ

- Reply-—è–∫–æ—Ä—å **–£–î–ê–õ–Ø–ï–¢–°–Ø**
- IME **–ø–æ—è–≤–ª—è–µ—Ç—Å—è** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ—Ç–æ–≤ –≤–≤–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç
- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–∫—Ä—ã—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é

### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ —á–∞—Ç–µ

```
[ Bot: "‚ûï –ù–æ–≤–∞—è –ª–æ–∫–∞—Ü–∏—è\n\n–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:" + inline-–∫–Ω–æ–ø–∫–∞ –û—Ç–º–µ–Ω–∞ ]
[ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è –≤–≤–æ–¥–∞ ]
```

### –ú–µ—Ç–æ–¥

```python
await mc.show_inline_input(message, text, kb)
```

---

## 7. Type C ‚Äî Reply ‚Üí Reply —Å —Ç–µ–∫—Å—Ç–æ–º (FSM/wizard)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–æ—à–∞–≥–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º

```
1. old_menu_id = Redis.get(chat_id)
2. if old_menu_id: delete(old_menu_id)

3. msg = send_message(question_text, ReplyKeyboard)
4. Redis.set(chat_id, msg.id)
```

### –û—Ç–ª–∏—á–∏–µ –æ—Ç Type A

- –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **–ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è** (–Ω—É–∂–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- –¢–µ–∫—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–æ–ø—Ä–æ—Å/–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é

---

## 8. Inline ‚Üí Inline + IME (–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" –≤ –∫–∞—Ä—Ç–æ—á–∫–µ

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–ü–æ—Å–ª–µ `show_inline_readonly` (B1) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:
1. –í—ã–±—Ä–∞–ª –ø—É–Ω–∫—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ ‚Üí `edit_inline()` (–∫–∞—Ä—Ç–æ—á–∫–∞)
2. –ù–∞–∂–∞–ª "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" ‚Üí `edit_inline_input()` (IME –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è)

### –ê–ª–≥–æ—Ä–∏—Ç–º

```
1. edit_text(text, InlineKeyboard)              # –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
2. old_menu_id = Redis.get(chat_id)
3. if old_menu_id: delete(old_menu_id)          # –£–¥–∞–ª–∏—Ç—å Reply-—è–∫–æ—Ä—å
4. Redis.delete(chat_id)                        # –û—á–∏—Å—Ç–∏—Ç—å –≤ Redis
```

### –ú–µ—Ç–æ–¥

```python
await mc.edit_inline_input(callback.message, text, kb)
```

---

## 9. Inline ‚Üí Reply (–≤–æ–∑–≤—Ä–∞—Ç –∏–∑ —Å—Ü–µ–Ω–∞—Ä–∏—è)

```
1. send_message(title, ReplyKeyboard)           # –°–ù–ê–ß–ê–õ–ê –Ω–æ–≤—ã–π —è–∫–æ—Ä—å
2. Redis.set(chat_id, msg.id)
3. delete_all_inline()                          # –£–¥–∞–ª–∏—Ç—å –í–°–ï tracked inline
```

### –ú–µ—Ç–æ–¥

```python
await mc.back_to_reply(callback.message, kb, title="üìã")
```

---

## 10. –¢–∞–±–ª–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞

| –°—Ü–µ–Ω–∞—Ä–∏–π | –¢–∏–ø | Reply-—è–∫–æ—Ä—å | IME | –ú–µ—Ç–æ–¥ |
|----------|-----|-------------|-----|-------|
| –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É –º–µ–Ω—é | A | –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è | –ù–µ—Ç | `show()` |
| –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ | B1 | –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è | –ù–µ—Ç | `show_inline_readonly()` |
| –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ (–∏–∑ Reply) | B2 | –£–¥–∞–ª—è–µ—Ç—Å—è | –î–∞ | `show_inline_input()` |
| –ü–∞–≥–∏–Ω–∞—Ü–∏—è/–ø—Ä–æ—Å–º–æ—Ç—Ä | ‚Äî | –ù–µ –º–µ–Ω—è–µ—Ç—Å—è | –ù–µ—Ç | `edit_inline()` |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–∏–∑ Inline) | ‚Äî | –£–¥–∞–ª—è–µ—Ç—Å—è | –î–∞ | `edit_inline_input()` |
| –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é | ‚Äî | –°–æ–∑–¥–∞—ë—Ç—Å—è | –ù–µ—Ç | `back_to_reply()` |

---

## 11. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π (B1)

```python
# –í handlers/admin_reply.py
elif text == t("admin:locations:list", lang):
    await loc_flow.show_list(message)

# –í flows/admin/locations.py
async def show_list(self, message: Message):
    locations = await api.get_locations()
    kb = locations_list_inline(locations, 0, lang)
    
    # B1: Reply-—è–∫–æ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, IME –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
    await self.mc.show_inline_readonly(
        message, 
        t("admin:locations:list_title", lang) % len(locations),
        kb
    )
```

### –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏ (B2)

```python
async def start_create(self, message: Message, state: FSMContext):
    await state.set_state(LocationCreate.name)
    
    # B2: Reply-—è–∫–æ—Ä—å —É–¥–∞–ª—è–µ—Ç—Å—è, IME –ø–æ—è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤–≤–æ–¥–∞
    await self.mc.show_inline_input(
        message,
        t("admin:location:enter_name", lang),
        cancel_inline(lang)
    )
```

### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –∫–∞—Ä—Ç–æ—á–∫–∏ (edit_inline_input)

```python
@router.callback_query(F.data.startswith("loc:edit:"))
async def edit_location(callback: CallbackQuery, state: FSMContext):
    loc_id = int(callback.data.split(":")[2])
    lang = user_lang.get(callback.from_user.id, DEFAULT_LANG)
    
    await state.set_state(LocationEdit.name)
    await state.update_data(loc_id=loc_id)
    
    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ –≤–≤–æ–¥—É ‚Äî IME –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
    await mc.edit_inline_input(
        callback.message,
        t("admin:location:edit_name", lang),
        cancel_inline(lang)
    )
    await callback.answer()
```

---

## 12. –°—Ç—Ä–æ–≥–∏–µ –∑–∞–ø—Ä–µ—Ç—ã

| –ó–∞–ø—Ä–µ—â–µ–Ω–æ                              | –ü–æ—á–µ–º—É                        |
| -------------------------------------- | ----------------------------- |
| `ReplyKeyboardRemove` –º–µ–∂–¥—É –º–µ–Ω—é       | –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç IME                 |
| –£–¥–∞–ª–µ–Ω–∏–µ –î–û –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–æ–≤–æ–≥–æ –º–µ–Ω—é       | –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç IME                 |
| ZWS –∫–∞–∫ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è                | API –æ—Ç–∫–ª–æ–Ω—è–µ—Ç                 |
| `is_persistent=False`                  | –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å—Ö–ª–æ–ø—ã–≤–∞–µ—Ç—Å—è       |
| –ù–µ—Å–∫–æ–ª—å–∫–æ —è–∫–æ—Ä–µ–π –≤ Redis               | –ù–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ      |
| B1 –¥–ª—è —Ñ–æ—Ä–º –≤–≤–æ–¥–∞                      | IME –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è               |
| B2 –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –≤—ã–±–æ—Ä–∞                  | IME –ø–æ—è–≤–∏—Ç—Å—è –±–µ–∑ –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏   |
| `edit_inline` –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è       | IME –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è               |

---

## 13. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```
bot/app/
‚îú‚îÄ‚îÄ main.py                    # dp, bot, process_update, route_by_role
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îî‚îÄ‚îÄ admin.py               # –§–û–†–ú–ê: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–Ω–æ–ø–æ–∫ (is_persistent=True)
‚îú‚îÄ‚îÄ flows/
‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ       ‚îî‚îÄ‚îÄ menu.py            # –õ–û–ì–ò–ö–ê: –∫–∞–∫–æ–µ –º–µ–Ω—é –ø–æ–∫–∞–∑–∞—Ç—å
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îî‚îÄ‚îÄ admin_reply.py         # –†–û–£–¢–ò–ù–ì: text ‚Üí flow action
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ menucontroller.py      # –¢–†–ê–ù–°–ü–û–†–¢: send/delete, Redis
```

---

## 14. –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞

- [ ] `is_persistent=True` –≤ ReplyKeyboard?
- [ ] –¢–µ–∫—Å—Ç –Ω–µ–ø—É—Å—Ç–æ–π (–Ω–µ ZWS)?
- [ ] –ü–æ—Ä—è–¥–æ–∫: send ‚Üí delete?
- [ ] –û–¥–∏–Ω —è–∫–æ—Ä—å –≤ Redis?
- [ ] –°–ø–∏—Å–æ–∫/–≤—ã–±–æ—Ä ‚Üí `show_inline_readonly()`?
- [ ] –§–æ—Ä–º–∞/–≤–≤–æ–¥ –∏–∑ Reply ‚Üí `show_inline_input()`?
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ Inline ‚Üí `edit_inline_input()`?
- [ ] –í–æ–∑–≤—Ä–∞—Ç ‚Üí `back_to_reply()`?

---

## 15. –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞       | –ò–∑–º–µ–Ω–µ–Ω–∏—è                                    |
| ------ | ---------- | -------------------------------------------- |
| 1.0    | 2024-12    | –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç                      |
| 2.0    | 2024-12-26 | ZWS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, is_persistent –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω    |
| 2.1    | 2024-12-28 | Type B —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ B1 (readonly) –∏ B2 (input)|
| 2.2    | 2024-12-28 | –î–æ–±–∞–≤–ª–µ–Ω edit_inline_input –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è|

